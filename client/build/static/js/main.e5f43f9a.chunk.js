(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{51:function(t,e,n){},53:function(t,e,n){},54:function(t,e,n){},73:function(t,e,n){},74:function(t,e,n){"use strict";n.r(e);var a,c,r=n(0),i=n.n(r),s=n(16),o=n(13),l=n(5),d=n(80),j=n(79),u=n(75),b=n(76),O=i.a.createContext({}),m=Object(r.createContext)({});!function(t){t.SUCCESS="success",t.WARN="warning",t.DANGER="danger",t.DEFAULT=""}(a||(a={})),function(t){t.CONTACT_ADD="Contact has been added!",t.CONTACT_ADD_FAILED="Contact has not been added!",t.CONTACT_UPDATE="Contact has been updated!",t.CONTACT_UPDATE_FAILED="Contact has not been updated!",t.CONTACT_DELETE="Contact has been deleted!",t.CONTACT_DELETE_FAILED="Contact has not been deleted!",t.DEFAULT=""}(c||(c={}));var h,p=n.p+"static/media/avatar-placeholder.8b00224c.png",C=n(1),x=function(t){var e=t.contact,n=Object(r.useContext)(O).removeContact,i=Object(r.useContext)(m).show;return Object(C.jsx)("div",{className:"card mb-3",children:Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"col-9 d-flex flex-row align-items-center",children:[Object(C.jsx)("div",{className:"contact-image me-3",children:Object(C.jsx)("img",{src:p,className:"w-100 h-100",alt:"avatar"})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("h5",{className:"card-title",children:e.name}),Object(C.jsx)("p",{className:"card-text fw-bolder email-blue",children:e.email})]})]}),Object(C.jsxs)("div",{className:"col-3 d-flex flex-row justify-content-end",children:[Object(C.jsx)(o.b,{to:"/edit-contact/".concat(e._id),className:"btn btn-outline-primary border-0 d-flex align-items-center",children:Object(C.jsx)(u.a,{height:"2em",width:"2em"})}),Object(C.jsx)("button",{className:"btn btn-outline-danger border-0",onClick:function(){return function(t){try{n(t),i(c.CONTACT_DELETE,a.WARN)}catch(e){i(c.CONTACT_DELETE_FAILED,a.DANGER)}}(e._id)},children:Object(C.jsx)(b.a,{height:"2em",width:"2em"})})]})]})})},e._id)},f=function(){return Object(C.jsx)("div",{className:"spinner-border text-primary",role:"status"})},T=(n(51),function(){var t=Object(r.useContext)(O),e=t.contacts,n=t.loading;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("h2",{className:"col-6 mb-0",children:"Contact List"}),Object(C.jsx)("div",{className:"col-6 d-flex justify-content-end",children:Object(C.jsx)(o.b,{to:"/add-contact",className:"btn px-4 btn-primary",children:"Add Contact"})})]}),Object(C.jsx)("hr",{className:"my-4"}),e.length?Object(C.jsx)(d.a,{children:e.map((function(t){return Object(C.jsx)(j.a,{timeout:400,classNames:"contact-item",children:Object(C.jsx)(x,{contact:t})},t._id)}))}):n?Object(C.jsx)(f,{}):Object(C.jsx)("p",{children:"There are no contacts!"})]})}),N=n(15),A=n(2),E=n(7),v=n.n(E),_=n(12),y=n(14),D=function(){var t=Object(r.useContext)(O).addContact,e=Object(r.useContext)(m).show,n=Object(l.f)(),i={name:"",email:""},s=Object(r.useState)(i),o=Object(y.a)(s,2),d=o[0],j=o[1],u=function(){var n=Object(_.a)(v.a.mark((function n(r){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.preventDefault();try{t(d),e(c.CONTACT_ADD,a.SUCCESS)}catch(s){e(c.CONTACT_ADD_FAILED,a.DANGER)}j(i);case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),b=function(t){j((function(e){return Object(A.a)(Object(A.a)({},e),Object(N.a)({},t.target.name,t.target.value))}))};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("h2",{className:"col-6 mb-0",children:"Add contact"}),Object(C.jsx)("div",{className:"col-6 d-flex justify-content-end",children:Object(C.jsx)("button",{className:"btn px-3 btn-danger",onClick:function(){n.goBack()},children:"Back"})})]}),Object(C.jsx)("hr",{className:"my-4"}),Object(C.jsxs)("form",{onSubmit:function(t){return u(t)},className:"",children:[Object(C.jsxs)("div",{className:"form-floating mb-3",children:[Object(C.jsx)("input",{value:d.name,onChange:function(t){return b(t)},id:"name",name:"name",type:"text",className:"form-control"}),Object(C.jsx)("label",{htmlFor:"name",children:"Name"})]}),Object(C.jsxs)("div",{className:"form-floating mb-3",children:[Object(C.jsx)("input",{value:d.email,onChange:function(t){return b(t)},id:"email",name:"email",type:"email",className:"form-control"}),Object(C.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(C.jsx)("button",{type:"submit",className:"btn btn-primary px-3",disabled:!(d.name.trim()&&d.email.trim()&&d.name.length<=20),children:"Add"})]})]})},g=function(t){var e=t.edContact,n=Object(r.useContext)(O).updateContact,i=Object(r.useContext)(m).show,s=Object(r.useState)(e),o=Object(y.a)(s,2),l=o[0],d=o[1],j=function(){var t=Object(_.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault();try{n(l),i(c.CONTACT_UPDATE,a.SUCCESS)}catch(r){i(c.CONTACT_UPDATE_FAILED,a.DANGER)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(t){d((function(e){return Object(A.a)(Object(A.a)({},e),Object(N.a)({},t.target.name,t.target.value))}))};return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("form",{onSubmit:function(t){return j(t)},className:"",children:[Object(C.jsxs)("div",{className:"form-floating mb-3",children:[Object(C.jsx)("input",{value:l.name,onChange:function(t){return u(t)},id:"name",name:"name",type:"text",className:"form-control"}),Object(C.jsx)("label",{htmlFor:"name",children:"Name"})]}),Object(C.jsxs)("div",{className:"form-floating mb-3",children:[Object(C.jsx)("input",{value:l.email,onChange:function(t){return u(t)},id:"email",name:"email",type:"text",className:"form-control"}),Object(C.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(C.jsx)("button",{type:"submit",className:"btn btn-primary px-3",disabled:!(l.name.trim()&&l.email.trim()&&(l.name!==e.name||l.email!==e.email)&&l.name.length<=20),children:"Update"})]})})},w=function(){var t=Object(l.f)(),e=Object(l.g)().id,n=Object(r.useContext)(O).contacts.find((function(t){return t._id===e}));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("h2",{className:"col-6 mb-0",children:"Edit contact"}),Object(C.jsx)("div",{className:"col-6 d-flex justify-content-end",children:Object(C.jsx)("button",{onClick:function(){t.goBack()},className:"btn px-3 btn-danger",children:"Back"})})]}),Object(C.jsx)("hr",{className:"my-4"}),n&&Object.keys(n).length&&n._id===e?Object(C.jsx)(g,{edContact:n}):Object(C.jsx)(f,{})]})},L=(n(53),n(77)),R=n(78),S=(n(54),function(){var t=Object(r.useContext)(m),e=t.hide,n=t.alert,a={className:"me-2",height:"1.5rem",width:"1.5rem"};return Object(C.jsx)(j.a,{in:n.visible,timeout:{enter:400,exit:200},classNames:"alert-transition",mountOnEnter:!0,unmountOnExit:!0,children:Object(C.jsxs)("div",{className:"alert alert-".concat(n.type," alert-dismissible text-center"),role:"alert",children:["danger"===n.type||"warning"===n.type?Object(C.jsx)(L.a,Object(A.a)({},a)):Object(C.jsx)(R.a,Object(A.a)({},a)),n.text,Object(C.jsx)("button",{onClick:e,type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]})})}),F=function(){var t=Object(r.useContext)(O).fetchContacts;return Object(r.useEffect)((function(){t()}),[]),Object(C.jsxs)("div",{className:"container pt-3",children:[Object(C.jsx)("h1",{className:"text-center",children:"Contact Manager"}),Object(C.jsx)(S,{}),Object(C.jsx)("hr",{className:"my-4"}),Object(C.jsx)(o.a,{children:Object(C.jsxs)(l.c,{children:[Object(C.jsx)(l.a,{component:T,path:"/",exact:!0}),Object(C.jsx)(l.a,{component:D,path:"/add-contact"}),Object(C.jsx)(l.a,{component:w,path:"/edit-contact/:id"})]})})]})};!function(t){t[t.SHOW_ALERT=0]="SHOW_ALERT",t[t.HIDE_ALERT=1]="HIDE_ALERT"}(h||(h={}));var H,k=function(t,e){switch(e.type){case h.SHOW_ALERT:return Object(A.a)(Object(A.a)({},e.payload),{},{visible:!0});case h.HIDE_ALERT:return Object(A.a)(Object(A.a)({},t),{},{visible:!1});default:return t}},I=function(t){var e=t.children,n={visible:!1,text:c.DEFAULT,type:a.DEFAULT},i=Object(r.useReducer)(k,n),s=Object(y.a)(i,2),o=s[0],l=s[1],d=function(){return l({type:h.HIDE_ALERT})};return Object(C.jsx)(m.Provider,{value:{show:function(t,e){l({type:h.SHOW_ALERT,payload:{text:t,type:e}}),setTimeout((function(){d()}),1500)},hide:d,alert:o},children:e})},U=n(19),P=n.n(U),W=n(34);!function(t){t[t.FETCH_CONTACTS=0]="FETCH_CONTACTS",t[t.FETCH_CONTACT=1]="FETCH_CONTACT",t[t.REMOVE_CONTACT=2]="REMOVE_CONTACT",t[t.ADD_CONTACT=3]="ADD_CONTACT",t[t.UPDATE_CONTACT=4]="UPDATE_CONTACT",t[t.SHOW_LOADER=5]="SHOW_LOADER",t[t.HIDE_LOADER=6]="HIDE_LOADER"}(H||(H={}));var $=function(t,e){switch(e.type){case H.FETCH_CONTACTS:return Object(A.a)(Object(A.a)({},t),{},{contacts:e.payload});case H.ADD_CONTACT:return Object(A.a)(Object(A.a)({},t),{},{contacts:[].concat(Object(W.a)(t.contacts),[e.payload])});case H.REMOVE_CONTACT:return Object(A.a)(Object(A.a)({},t),{},{contacts:t.contacts.filter((function(t){return t._id!==e.payload}))});case H.UPDATE_CONTACT:return Object(A.a)(Object(A.a)({},t),{},{contacts:t.contacts.map((function(t){return t._id===e.payload._id?Object(A.a)(Object(A.a)({},t),e.payload):t}))});case H.SHOW_LOADER:return Object(A.a)(Object(A.a)({},t),{},{loading:!0});case H.HIDE_LOADER:return Object(A.a)(Object(A.a)({},t),{},{loading:!1});default:return t}},q={url:"https://kir3kin.pp.ua:3043/api/gqlContacts",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},B=function(t){var e=t.children,n=Object(r.useReducer)($,{contacts:[],loading:!1}),a=Object(y.a)(n,2),c=a[0],i=a[1],s=function(){var t=Object(_.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i({type:H.SHOW_LOADER}),t.next=3,P()(Object(A.a)(Object(A.a)({},q),{},{data:{query:"query {\n\tcontacts {\n\t\t_id\n\t\tname\n\t\temail\n\t}\n}"}})).then((function(t){var e=t.data.data.contacts;i({type:H.FETCH_CONTACTS,payload:e}),i({type:H.HIDE_LOADER})}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=Object(_.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P()(Object(A.a)(Object(A.a)({},q),{},{data:{query:"mutation CreateContact($input: ContactInput) {\n\tcreateContact(input: $input) {\n\t\t_id\n\t\tname\n\t\temail\n\t}\n}",variables:{input:Object(A.a)({},e)}}})).then((function(t){var e=t.data.data.createContact;i({type:H.ADD_CONTACT,payload:e})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(_.a)(v.a.mark((function t(e){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:e.name,email:e.email},t.next=3,P()(Object(A.a)(Object(A.a)({},q),{},{data:{query:"mutation UpdateContact(\n\t$id: ID!\n\t$input: ContactInput\n) {\n\tupdateContact(id: $id, input: $input) {\n\t\t_id\n\t\tname\n\t\temail\n\t}\n}",variables:{id:e._id,input:n}}})).then((function(t){var e=t.data.data.updateContact;i({type:H.UPDATE_CONTACT,payload:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(_.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P()(Object(A.a)(Object(A.a)({},q),{},{data:{query:"mutation DeleteContact($id: ID!) {\n\tdeleteContact(id: $id) {\n\t\t_id\n\t\tname\n\t\temail\n\t}\n}",variables:{id:e}}})).then((function(t){var e=t.data.data.deleteContact._id;i({type:H.REMOVE_CONTACT,payload:e})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsx)(O.Provider,{value:{contacts:c.contacts,loading:c.loading,fetchContacts:s,removeContact:d,addContact:o,updateContact:l},children:e})};n(73);Object(s.render)(Object(C.jsx)(B,{children:Object(C.jsx)(I,{children:Object(C.jsx)(F,{})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.e5f43f9a.chunk.js.map